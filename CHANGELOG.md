# 更新日志

本文档记录 BrightChat 项目的所有重要变更。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

---

## [1.0.0] - 2026-01-29

### 新增

#### 核心功能
- 完整的 LLM 聊天功能，支持流式响应
- 多 LLM 提供商支持（OpenAI、Anthropic、智谱 AI、自定义）
- 用户认证和角色权限管理（admin/user）
- 会话管理和消息历史
- 消息收藏功能

#### Agent 模块
- 基于 LangGraph 的智能 Agent 系统
- 预置工具：calculator、datetime、knowledge_search、code_executor、browser、file
- Agent 类型：rag（知识库）、tool（工具调用）、custom（自定义）
- Think-Act-Observe 状态循环
- Agent 执行历史追踪

#### 知识库 RAG
- ChromaDB 向量数据库集成
- 多格式文档支持（PDF、DOCX、TXT、MD、HTML、XLS、XLSX、PPT、PPTX）
- BGE-large-zh-v1.5 嵌入模型
- 智能分块和向量化
- 语义搜索功能
- 文档切片详情查询接口（支持分页）

#### 管理功能
- LLM 模型配置管理
- 模型提供商管理
- 用户管理（CRUD）
- Agent 管理（CRUD）
- 知识库分组和管理
- 文档上传和处理

### 修复

#### RAG 模块修复（13 个问题）
- 修复知识库 0 chunks 问题
- 修复 ChromaDB 连接配置
- 修复文档上传处理错误
- 修复向量索引创建失败
- 修复语义搜索返回空结果
- 修复文档分块大小不一致
- 修复文件类型验证漏洞
- 修复路径遍历安全漏洞
- 优化文档处理性能

#### Agent 模块修复（7 个问题）
- 修复 Agent 对话状态同步
- 修复工具调用失败处理
- 修复 Agent 执行日志记录
- 修复 LangGraph 状态管理
- 修复 Agent 会话关联
- 修复流式响应中断
- 优化 Agent 推理步数限制

#### 代码质量
- 清理 200+ 临时文件和测试产物
- 移除未使用的组件和模块
- 统一代码风格和命名规范
- 添加类型定义和文档注释
- 修复 ESLint 警告

### 安全
- 添加文件上传路径验证
- 增强输入参数验证
- 修复 SQL 注入风险
- 改进错误消息（不泄露敏感信息）

### 文档
- 创建完整的 API 文档（MdDocs/backend/api/）
- 添加 Agent 配置指南
- 添加知识库部署指南
- 更新开发环境配置
- 创建故障排查文档

### 性能
- 优化数据库查询（添加索引）
- 减少 Docker 镜像大小
- 优化前端打包体积
- 改进流式响应缓冲

### 变更
- 重构前后端服务层
- 统一时间格式处理
- 改进错误处理机制
- 优化 Docker 编排配置

---

## [0.9.0] - 2026-01-25

### 新增
- 基础聊天功能
- 用户认证
- 会话管理
- LLM 模型集成

### 变更
- 初始项目结构
- Docker 部署配置

---

## 版本说明

### 版本格式：主版本号.次版本号.修订号

- **主版本号**：不兼容的 API 修改
- **次版本号**：向下兼容的功能新增
- **修订号**：向下兼容的问题修复

### 变更类型

- **新增** - 新功能
- **变更** - 功能变更
- **弃用** - 即将移除的功能
- **移除** - 已移除的功能
- **修复** - 问题修复
- **安全** - 安全相关修复

---

**最后更新**: 2026-01-29
